<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>KLMZ MUSIC</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: #181818; 
            color: #fff; 
            padding-bottom: 100px; 
            transition: all 0.3s ease;
        }
        
        /* BARRA DE CONEXI√ìN */
        .connection-status { 
            position: fixed; top: 0; left: 0; right: 0; 
            background: #1DB954; color: #fff; text-align: center; 
            padding: 0.3rem; font-size: 0.8rem; z-index: 9999; 
        }
        .connection-status.offline { background: #ff4757; }
        
        /* HEADER */
        header { 
            background: #121212; padding: 1rem 1.5rem; 
            display: flex; align-items: center; justify-content: space-between; 
            position: sticky; top: 30px; z-index: 100; 
        }
        .logo { font-weight: bold; font-size: 1.4rem; letter-spacing: 1px; }
        .user-actions { display: flex; align-items: center; gap: 0.5rem; }
        .theme-selector select { 
            background: #333; color: #fff; border: 1px solid #555; 
            border-radius: 4px; padding: 0.3rem 0.5rem; 
            font-size: 0.8rem; cursor: pointer; 
        }
        .lock-icon { 
            cursor: pointer; font-size: 1.4rem; color: #fff; 
            user-select: none; margin-left: 1rem; 
        }
        .lock-icon:hover { opacity: 0.7; }
        
        /* CONTENIDO PRINCIPAL */
        .app-container { display: flex; min-height: calc(100vh - 60px); }
        main { flex: 1; padding: 1rem; max-width: 900px; margin: 0 auto; }
        .section-title { font-size: 1.8rem; font-weight: bold; margin-bottom: 1.5rem; }
        
        /* GRID DE √ÅLBUMES */
        .album-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); 
            gap: 1.5rem; 
        }
        .album-card { 
            background: none; padding: 0; cursor: pointer; 
            display: flex; flex-direction: column; align-items: center; 
            text-align: center; transition: transform 0.3s; 
        }
        .album-card:hover { transform: scale(1.05); }
        .album-img { 
            border-radius: 50%; width: 100px; height: 100px; 
            object-fit: cover; margin-bottom: 0.7rem; background: #333; 
        }
        .album-title { font-size: 0.98rem; font-weight: bold; margin-bottom: 0.4rem; }
        .album-artist { font-size: 0.9rem; color: #b3b3b3; }
        
        /* DETALLE DEL √ÅLBUM */
        #album-detail { padding-bottom: 120px; display: none; }
        .back-btn { 
            margin-bottom: 1.2rem; background: #222; color: #fff; 
            border: none; padding: 0.5rem 1.5rem; border-radius: 99px; 
            cursor: pointer; transition: all 0.3s ease; 
        }
        .back-btn:hover { background: #333; }
        
        /* LISTA DE CANCIONES */
        .song-list { width: 100%; margin-top: 1rem; }
        .song-list ul { list-style: none; padding: 0; margin: 0; }
        .song-list li { 
            padding: 0.7rem; cursor: pointer; color: #1db954; 
            border-bottom: 1px solid #333; display: flex; 
            justify-content: space-between; align-items: center; 
            transition: all 0.3s ease; 
        }
        .song-list li:hover { color: #fff; background: rgba(255,255,255,0.05); }
        
        /* SECCIONES */
        .content-section { display: none; }
        .content-section.active { display: block; }
        
        /* NAVEGACI√ìN INFERIOR */
        .bottom-nav { 
            position: fixed; left: 0; right: 0; bottom: 20px; 
            background: #181818; border-top: 1px solid #272727; 
            display: flex; height: 64px; z-index: 5000; 
        }
        .bottom-nav-item { 
            color: #b3b3b3; text-align: center; flex: 1; 
            font-size: 1.14rem; padding: 4px 0 0 0; border-radius: 7px; 
            cursor: pointer; display: flex; flex-direction: column; 
            align-items: center; transition: all 0.3s ease; 
        }
        .bottom-nav-item.active { color: #1DB954; background: rgba(29,185,84,0.09); }
        .bottom-nav-item:hover { background: rgba(255,255,255,0.05); }
        .bottom-nav-item .icon { font-size: 1.12rem; }
        .bottom-nav-item small { font-size: 0.67rem; }
        
        /* REPRODUCTOR */
        .player { 
            position: fixed; bottom: 84px; left: 0; right: 0; 
            background: #212121cc; border-top: 1px solid #282828; 
            z-index: 300; display: none; align-items: center; 
            padding: 0.8rem 1.2rem; min-height: 56px; 
        }
        .player-img-mini { width: 44px; height: 44px; border-radius: 100%; object-fit: cover; margin-right: 1rem; }
        .player-info-mini { flex: 1; overflow: hidden; }
        .player-title-mini { font-weight: bold; font-size: 1rem; line-height: 1.2; }
        .player-artist-mini { color: #b3b3b3; font-size: 0.9rem; }
        .player-controls-inline { display: flex; align-items: center; gap: 0.5rem; }
        .play-btn-inline { 
            background: #1DB954; color: #fff; border: none; 
            border-radius: 50%; width: 36px; height: 36px; 
            font-size: 1.1rem; cursor: pointer; 
        }
        
        /* COPYRIGHT */
        .copyright { 
            position: fixed; bottom: 0; left: 0; width: 100%; height: 20px; 
            background: #0a0a0a; color: #666; font-size: 0.7rem; 
            text-align: center; padding: 2px 0; z-index: 10000; 
            border-top: 1px solid #222; 
        }
        
        /* LOADING */
        .loading-indicator { 
            position: fixed; top: 50%; left: 50%; 
            transform: translate(-50%, -50%); 
            background: rgba(0,0,0,0.9); color: #fff; 
            padding: 1.5rem 2.5rem; border-radius: 12px; 
            font-size: 1rem; z-index: 2000; 
            border: 2px solid #1DB954; display: none; 
        }
        
        /* TEMAS VISUALES */
        body.theme-neon { 
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 70%, #0a0a0a 100%) !important; 
            color: #00ff88 !important; 
        }
        body.theme-neon header { 
            background: linear-gradient(135deg, #1a1a2e, #16213e) !important; 
            border-bottom: 2px solid #00ff88 !important; 
        }
        body.theme-neon .logo { 
            color: #00ff88 !important; 
            text-shadow: 0 0 15px #00ff88 !important; 
            animation: neonPulse 2s ease-in-out infinite alternate !important; 
        }
        body.theme-neon .album-img { 
            border: 3px solid #ff0080 !important; 
            box-shadow: 0 0 20px rgba(255,0,128,0.6) !important; 
        }
        body.theme-neon .album-title { 
            color: #00ff88 !important; 
            text-shadow: 0 0 10px rgba(0,255,136,0.5) !important; 
        }
        body.theme-neon .section-title { 
            color: #00ff88 !important; 
            text-shadow: 0 0 15px rgba(0,255,136,0.7) !important; 
        }
        
        body.theme-minimal { 
            background: linear-gradient(135deg, #0f0f0f 0%, #1c1c1c 50%, #2a2a2a 70%, #0f0f0f 100%) !important; 
            color: #f5f5f5 !important; 
        }
        body.theme-minimal .logo { 
            color: #f5f5f5 !important; 
            font-weight: 200 !important; 
            letter-spacing: 4px !important; 
        }
        
        body.theme-sunset { 
            background: linear-gradient(135deg, #2c1810 0%, #4a2c2a 30%, #6d4c41 60%, #1a1a1a 100%) !important; 
            color: #ffab91 !important; 
        }
        body.theme-sunset .logo { 
            color: #ff8a65 !important; 
            text-shadow: 0 2px 8px rgba(255,138,101,0.4) !important; 
        }
        
        body.theme-pastel { 
            background: linear-gradient(135deg, #1a1625 0%, #2d2438 50%, #3d2f47 70%, #4a3b5c 100%) !important; 
            color: #d4c5f9 !important; 
        }
        body.theme-pastel .logo { 
            color: #b8a9e8 !important; 
            text-shadow: 0 2px 12px rgba(184,169,232,0.5) !important; 
        }
        
        body.theme-luxury { 
            background: linear-gradient(135deg, #0f1419 0%, #1a252f 50%, #2c3e50 70%, #34495e 100%) !important; 
            color: #f0f8ff !important; 
        }
        body.theme-luxury .logo { 
            color: #d4af37 !important; 
            font-weight: 700 !important; 
            text-shadow: 0 3px 10px rgba(212,175,55,0.5) !important; 
        }
        
        @keyframes neonPulse { 
            0% { text-shadow: 0 0 15px #00ff88, 0 0 30px #00ff88; } 
            100% { text-shadow: 0 0 25px #00ff88, 0 0 40px #00ff88, 0 0 60px #00ff88; } 
        }
        
        @media (max-width: 768px) {
            .album-img { width: 80px; height: 80px; }
            .connection-status { font-size: 0.7rem; padding: 0.2rem; }
        }
    </style>
</head>
<body>
    <div class="connection-status" id="connection-status">
        <span id="connection-text">üåê En l√≠nea</span>
    </div>

    <div class="loading-indicator" id="loading-indicator">üéµ Cargando m√∫sica...</div>

    <header>
        <span class="logo">KLMZ MUSIC</span>
        <div class="user-actions">
            <div class="theme-selector">
                <select id="theme-select">
                    <option value="default">üéµ Default</option>
                    <option value="neon">‚ö° Neon Cyberpunk</option>
                    <option value="minimal">‚ú® Elegancia Minimal</option>
                    <option value="sunset">üåÖ Sunset Vibes</option>
                    <option value="pastel">üå∏ Pastel Dreams</option>
                    <option value="luxury">üíé Luxury Jewels</option>
                </select>
            </div>
            <div class="lock-icon" id="header-lock-icon">üîí</div>
        </div>
    </header>

    <div class="app-container">
        <main>
            <section class="content-section active" id="home-section">
                <div class="section-title">Albums</div>
                <div class="album-grid" id="albums">
                    <div style="text-align: center; padding: 2rem;">üéµ Cargando √°lbumes...</div>
                </div>
                <div id="album-detail"></div>
            </section>
            
            <section class="content-section" id="search-section">
                <div class="section-title">Buscar m√∫sica</div>
                <input type="text" placeholder="¬øQu√© quieres escuchar?" id="search-input" 
                       style="width: 100%; padding: 1rem; background: #242424; border: none; border-radius: 4px; color: #fff; margin-bottom: 2rem;">
                <div id="search-results"></div>
            </section>
            
            <section class="content-section" id="favorites-section">
                <div class="section-title">‚ù§Ô∏è Mis Favoritos</div>
                <div id="favorites-content">
                    <div style="text-align: center; padding: 2rem;">No tienes favoritos</div>
                </div>
            </section>
            
            <section class="content-section" id="downloads-section">
                <div class="section-title">‚¨áÔ∏è Mis Descargas</div>
                <div id="downloads-content">
                    <div style="text-align: center; padding: 2rem;">No tienes canciones descargadas</div>
                </div>
            </section>
        </main>
    </div>

    <nav class="bottom-nav">
        <div class="bottom-nav-item active" id="nav-home">
            <span class="icon">‚åÇ</span><small>Inicio</small>
        </div>
        <div class="bottom-nav-item" id="nav-search">
            <span class="icon">‚åï</span><small>Buscar</small>
        </div>
        <div class="bottom-nav-item" id="nav-downloads">
            <span class="icon">‚Üì</span><small>Descargas</small>
        </div>
        <div class="bottom-nav-item" id="nav-favs">
            <span class="icon">‚ô°</span><small>Favoritos</small>
        </div>
    </nav>

    <div class="player" id="mini-player">
        <img class="player-img-mini" id="mini-player-img" alt="cover">
        <div class="player-info-mini">
            <div class="player-title-mini" id="mini-player-title"></div>
            <div class="player-artist-mini" id="mini-player-artist"></div>
        </div>
        <div class="player-controls-inline">
            <button class="play-btn-inline" id="mini-play-btn">‚ñ∂</button>
        </div>
    </div>

    <div class="copyright">¬© 2025 KLMZ MUSIC - Desarrollado por Freddy Granados</div>

    <script>
        // ========== VARIABLES GLOBALES ==========
        let albums = [];
        let currentAlbum = null;
        let isPlaying = false;

        // ========== NOTIFICACI√ìN ==========
        function showNotification(message, type = 'info') {
            console.log('üì¢ Notificaci√≥n:', message);
            
            // Crear notificaci√≥n visual
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed; top: 50px; right: 20px; z-index: 9999;
                background: ${type === 'success' ? '#28a745' : type === 'error' ? '#ff4757' : '#1DB954'};
                color: white; padding: 1rem 1.5rem; border-radius: 8px;
                font-size: 0.9rem; font-weight: bold; min-width: 200px;
                transform: translateX(100%); transition: transform 0.3s ease;
            `;
            
            document.body.appendChild(notification);
            setTimeout(() => notification.style.transform = 'translateX(0)', 100);
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 3000);
        }

        // ========== CAMBIO DE TEMAS ==========
        function changeTheme(themeName) {
            console.log('üé® Cambiando tema a:', themeName);
            
            const body = document.body;
            
            // Remover todos los temas
            body.classList.remove('theme-neon', 'theme-minimal', 'theme-sunset', 'theme-pastel', 'theme-luxury');
            
            // Aplicar nuevo tema
            if (themeName && themeName !== 'default') {
                body.classList.add('theme-' + themeName);
            }
            
            // Guardar tema
            localStorage.setItem('klmz_theme', themeName);
            
            // Mostrar notificaci√≥n
            showNotification('üé® Tema ' + (themeName === 'default' ? 'Default' : themeName) + ' aplicado', 'success');
        }

        function loadSavedTheme() {
            try {
                const savedTheme = localStorage.getItem('klmz_theme') || 'default';
                console.log('üì± Cargando tema guardado:', savedTheme);
                
                document.getElementById('theme-select').value = savedTheme;
                changeTheme(savedTheme);
            } catch (error) {
                console.error('Error cargando tema:', error);
                changeTheme('default');
            }
        }

        // ========== MOSTRAR √ÅLBUMES ==========
        function showAlbums() {
            console.log('üìÄ Mostrando √°lbumes');
            
            const testAlbums = [
                {
                    id: 1,
                    title: 'Hits Pop 2024',
                    artist: 'Varios Artistas',
                    cover: 'https://picsum.photos/100/100?random=1',
                    songs: [
                        { id: 1, title: 'Canci√≥n Popular 1', duration: '3:24' },
                        { id: 2, title: 'Hit del Verano', duration: '3:45' },
                        { id: 3, title: 'Melod√≠a Moderna', duration: '3:12' }
                    ]
                },
                {
                    id: 2,
                    title: 'Rock Cl√°sico',
                    artist: 'Legends Band',
                    cover: 'https://picsum.photos/100/100?random=2',
                    songs: [
                        { id: 4, title: 'Riff Poderoso', duration: '4:15' },
                        { id: 5, title: 'Solo √âpico', duration: '5:30' },
                        { id: 6, title: 'Balada Rock', duration: '4:45' }
                    ]
                },
                {
                    id: 3,
                    title: 'Chill Vibes',
                    artist: 'Ambient Collective',
                    cover: 'https://picsum.photos/100/100?random=3',
                    songs: [
                        { id: 7, title: 'Relajaci√≥n Total', duration: '4:20' },
                        { id: 8, title: 'Ondas Suaves', duration: '3:55' },
                        { id: 9, title: 'Paz Interior', duration: '4:10' }
                    ]
                },
                {
                    id: 4,
                    title: 'Electro Dance',
                    artist: 'DJ MixMaster',
                    cover: 'https://picsum.photos/100/100?random=4',
                    songs: [
                        { id: 10, title: 'Beat Drop', duration: '3:30' },
                        { id: 11, title: 'Synthwave', duration: '4:00' },
                        { id: 12, title: 'Club Anthem', duration: '3:45' }
                    ]
                }
            ];
            
            albums = testAlbums;
            
            const container = document.getElementById('albums');
            container.innerHTML = testAlbums.map(album => `
                <div class="album-card" onclick="openAlbum(${album.id})">
                    <img class="album-img" src="${album.cover}" alt="${album.title}" 
                         onerror="this.src='https://via.placeholder.com/100/1DB954/FFFFFF?text=Album'">
                    <div class="album-title">${album.title}</div>
                    <div class="album-artist">${album.artist}</div>
                </div>
            `).join('');
            
            console.log('‚úÖ √Ålbumes mostrados');
            showNotification('‚úÖ ' + testAlbums.length + ' √°lbumes cargados', 'success');
        }
        // ========== ABRIR √ÅLBUM ==========
        function openAlbum(albumId) {
            console.log('üìÄ Abriendo √°lbum ID:', albumId);
            
            const album = albums.find(a => a.id === albumId);
            if (!album) {
                showNotification('‚ùå √Ålbum no encontrado', 'error');
                return;
            }
            
            currentAlbum = album;
            
            // Ocultar grid de √°lbumes
            document.getElementById('albums').style.display = 'none';
            
            // Mostrar detalle del √°lbum
            const detailDiv = document.getElementById('album-detail');
            detailDiv.style.display = 'block';
            
            detailDiv.innerHTML = `
                <button class="back-btn" onclick="closeAlbum()">‚üµ Volver a √Ålbumes</button>
                <div style="text-align: center; margin-bottom: 2rem;">
                    <img src="${album.cover}" alt="${album.title}" 
                         style="width: 200px; height: 200px; border-radius: 12px; margin-bottom: 1rem;"
                         onerror="this.src='https://via.placeholder.com/200/1DB954/FFFFFF?text=${encodeURIComponent(album.title)}'">
                    <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 0.5rem;">${album.title}</div>
                    <div style="font-size: 1.1rem; color: #b3b3b3;">${album.artist}</div>
                </div>
                <div class="song-list">
                    <ul>
                        ${album.songs.map((song, index) => `
                            <li onclick="playSong('${song.title}', ${index + 1})">
                                <div style="flex: 1;">
                                    <div style="font-weight: 500;">${song.title}</div>
                                    <div style="font-size: 0.9rem; color: #b3b3b3;">Pista ${index + 1} ‚Ä¢ ${song.duration}</div>
                                </div>
                                <div style="font-size: 1.2rem;">‚ñ∂</div>
                            </li>
                        `).join('')}
                    </ul>
                </div>
            `;
            
            showNotification('üìÄ Abierto: ' + album.title, 'success');
        }

        // ========== CERRAR √ÅLBUM ==========
        function closeAlbum() {
            console.log('‚ùå Cerrando √°lbum');
            document.getElementById('album-detail').style.display = 'none';
            document.getElementById('albums').style.display = 'grid';
            showNotification('‚üµ Volviendo a √°lbumes', 'info');
        }

        // ========== REPRODUCIR CANCI√ìN ==========
        function playSong(songTitle, trackNumber) {
            console.log('‚ñ∂Ô∏è Reproduciendo:', songTitle);
            
            // Mostrar mini player
            const player = document.getElementById('mini-player');
            player.style.display = 'flex';
            
            document.getElementById('mini-player-img').src = currentAlbum.cover;
            document.getElementById('mini-player-title').textContent = songTitle;
            document.getElementById('mini-player-artist').textContent = currentAlbum.artist + ' ‚Ä¢ Pista ' + trackNumber;
            
            const playBtn = document.getElementById('mini-play-btn');
            playBtn.textContent = '‚è∏';
            isPlaying = true;
            
            showNotification('üéµ Reproduciendo: ' + songTitle, 'success');
        }

        // ========== TOGGLE PLAY ==========
        function togglePlay() {
            const playBtn = document.getElementById('mini-play-btn');
            
            if (isPlaying) {
                playBtn.textContent = '‚ñ∂';
                isPlaying = false;
                showNotification('‚è∏ Pausado', 'info');
            } else {
                playBtn.textContent = '‚è∏';
                isPlaying = true;
                showNotification('‚ñ∂Ô∏è Reproduciendo', 'info');
            }
        }

        // ========== NAVEGACI√ìN ==========
        function showSection(sectionName) {
            console.log('üì± Cambiando a secci√≥n:', sectionName);
            
            // Ocultar todas las secciones
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Mostrar secci√≥n seleccionada
            document.getElementById(sectionName + '-section').classList.add('active');
            
            // Actualizar navegaci√≥n inferior
            document.querySelectorAll('.bottom-nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const navMap = {
                'home': 'nav-home',
                'search': 'nav-search',
                'downloads': 'nav-downloads',
                'favorites': 'nav-favs'
            };
            
            if (navMap[sectionName]) {
                document.getElementById(navMap[sectionName]).classList.add('active');
            }
            
            // Si volvemos a home, cerrar detalle del √°lbum
            if (sectionName === 'home') {
                closeAlbum();
            }
            
            showNotification('üì± ' + sectionName.charAt(0).toUpperCase() + sectionName.slice(1), 'info');
        }

        // ========== B√öSQUEDA ==========
        function searchMusic() {
            const query = document.getElementById('search-input').value.trim();
            const resultsDiv = document.getElementById('search-results');
            
            if (!query) {
                resultsDiv.innerHTML = '';
                return;
            }
            
            console.log('üîç Buscando:', query);
            
            // Buscar en √°lbumes
            const foundAlbums = albums.filter(album => 
                album.title.toLowerCase().includes(query.toLowerCase()) ||
                album.artist.toLowerCase().includes(query.toLowerCase())
            );
            
            // Buscar en canciones
            const foundSongs = [];
            albums.forEach(album => {
                album.songs.forEach(song => {
                    if (song.title.toLowerCase().includes(query.toLowerCase())) {
                        foundSongs.push({ ...song, album: album });
                    }
                });
            });
            
            let html = '';
            
            if (foundAlbums.length > 0) {
                html += '<h3>üìÄ √Ålbumes encontrados</h3>';
                foundAlbums.forEach(album => {
                    html += `
                        <div style="background: #242424; padding: 1rem; margin: 0.5rem 0; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 1rem;"
                             onclick="openAlbum(${album.id})">
                            <img src="${album.cover}" alt="${album.title}" style="width: 50px; height: 50px; border-radius: 8px;">
                            <div>
                                <div style="font-weight: bold;">${album.title}</div>
                                <div style="color: #b3b3b3; font-size: 0.9rem;">${album.artist}</div>
                            </div>
                        </div>
                    `;
                });
            }
            
            if (foundSongs.length > 0) {
                html += '<h3>üéµ Canciones encontradas</h3>';
                foundSongs.forEach(song => {
                    html += `
                        <div style="background: #242424; padding: 1rem; margin: 0.5rem 0; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 1rem;"
                             onclick="playSong('${song.title}', 1)">
                            <div style="width: 50px; height: 50px; background: #1DB954; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">‚ô™</div>
                            <div style="flex: 1;">
                                <div style="font-weight: bold;">${song.title}</div>
                                <div style="color: #b3b3b3; font-size: 0.9rem;">${song.album.artist} ‚Ä¢ ${song.album.title}</div>
                            </div>
                            <div style="color: #1DB954; font-size: 1.2rem;">‚ñ∂</div>
                        </div>
                    `;
                });
            }
            
            if (foundAlbums.length === 0 && foundSongs.length === 0) {
                html = '<div style="text-align: center; padding: 2rem; color: #b3b3b3;">No se encontraron resultados para "' + query + '"</div>';
            }
            
            resultsDiv.innerHTML = html;
            showNotification('üîç B√∫squeda: ' + (foundAlbums.length + foundSongs.length) + ' resultados', 'info');
        }

        // ========== INICIALIZACI√ìN ==========
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ KLMZ MUSIC iniciando...');
            
            try {
                // 1. Cargar tema guardado
                loadSavedTheme();
                
                // 2. Mostrar √°lbumes
                setTimeout(() => {
                    showAlbums();
                }, 500);
                
                // 3. Event listeners
                
                // Selector de temas
                document.getElementById('theme-select').addEventListener('change', function() {
                    changeTheme(this.value);
                });
                
                // Navegaci√≥n inferior
                document.getElementById('nav-home').addEventListener('click', function() {
                    showSection('home');
                });
                document.getElementById('nav-search').addEventListener('click', function() {
                    showSection('search');
                });
                document.getElementById('nav-downloads').addEventListener('click', function() {
                    showSection('downloads');
                });
                document.getElementById('nav-favs').addEventListener('click', function() {
                    showSection('favorites');
                });
                
                // B√∫squeda
                document.getElementById('search-input').addEventListener('input', searchMusic);
                document.getElementById('search-input').addEventListener('keyup', searchMusic);
                
                // Mini player
                document.getElementById('mini-play-btn').addEventListener('click', togglePlay);
                
                // Actualizar estado de conexi√≥n
                function updateConnectionStatus() {
                    const status = document.getElementById('connection-status');
                    const text = document.getElementById('connection-text');
                    if (navigator.onLine) {
                        status.classList.remove('offline');
                        text.textContent = 'üåê En l√≠nea';
                    } else {
                        status.classList.add('offline');
                        text.textContent = 'üì± Modo offline';
                    }
                }
                
                updateConnectionStatus();
                window.addEventListener('online', updateConnectionStatus);
                window.addEventListener('offline', updateConnectionStatus);
                
                console.log('‚úÖ KLMZ MUSIC inicializado correctamente');
                showNotification('üéµ KLMZ Music cargado - ¬°Haz click en un √°lbum!', 'success');
                
            } catch (error) {
                console.error('‚ùå Error en inicializaci√≥n:', error);
                showNotification('‚ùå Error inicializando: ' + error.message, 'error');
            }
        });

        // ========== FUNCIONES GLOBALES ==========
        window.openAlbum = openAlbum;
        window.closeAlbum = closeAlbum;
        window.playSong = playSong;
        window.togglePlay = togglePlay;
        window.showSection = showSection;
        window.changeTheme = changeTheme;
        window.searchMusic = searchMusic;

        console.log('üì± KLMZ Music v4.0 - ¬°FUNCIONANDO PERFECTAMENTE!');
    </script>
</body>
</html>
