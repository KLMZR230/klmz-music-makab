<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>KLMZ MUSIC</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <style>
        /* ... (tu CSS previo, solo a√±ado lo importante aqu√≠) ... */

        .bottom-nav-mobile {
            display: none;
        }
        @media (max-width: 900px) {
            .bottom-nav-mobile {
                display: flex !important;
                position: fixed;
                z-index: 4000;
                left: 0; right: 0; bottom: 0;
                background: #181818;
                border-top: 1px solid #282828;
                justify-content: space-around;
                align-items: center;
                height: 64px;
            }
            .bottom-nav-mobile a {
                color: #b3b3b3;
                text-decoration: none;
                text-align: center;
                font-size: 1.6rem;
                flex: 1 1 0;
                padding: 5px 0 0 0;
                transition: background .2s, color .2s;
            }
            .bottom-nav-mobile a.active,
            .bottom-nav-mobile a:active,
            .bottom-nav-mobile a:focus {
                color: #1DB954;
                background: rgba(255,255,255,0.09);
            }
            .bottom-nav-mobile small {
                display: block;
                font-size: 0.77rem;
                margin-top: .07rem;
                letter-spacing: .03em;
                line-height: 1.1;
            }
            body { padding-bottom: 77px !important; }
        }
        /* resto de tu CSS habitual aqu√≠ (navegaciones, grid, reproductor, etc.) */
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <span class="logo">KLMZ MUSIC</span>
        <div class="nav-mobile" onclick="toggleMobileNav()">‚ò∞</div>
        <nav id="nav-menu">
            <a href="#" onclick="showSection('home')" class="active">Inicio</a>
            <a href="#" onclick="showSection('search')">Buscar</a>
            <a href="#" onclick="showSection('library')">Tu Biblioteca</a>
        </nav>
        <div class="user-actions">
            <div class="lock-icon" title="Iniciar sesi√≥n / Registrarse" onclick="showAuth('login')">üîí</div>
        </div>
    </header>

    <div class="app-container">
        <!-- Sidebar -->
        <aside id="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-menu">
                    <a href="#" onclick="showSection('home')" class="active">üè† Inicio</a>
                    <a href="#" onclick="showSection('search')">üîç Buscar</a>
                    <a href="#" onclick="showSection('library')">üìö Tu biblioteca</a>
                    <a href="#" onclick="showFavorites()" class="fav-link">‚ù§Ô∏è Favoritos</a>
                </div>
            </div>
            <div class="sidebar-section">
                <h3>Playlists</h3>
                <button class="create-playlist" onclick="createPlaylist()">‚ûï Crear playlist</button>
                <div class="sidebar-menu" id="playlists-menu"></div>
            </div>
        </aside>
        <!-- Main Content -->
        <main>
            <section class="content-section active" id="home-section">
                <div class="section-title">Bienvenido a KLMZ MUSIC</div>
                <div class="album-grid" id="albums"></div>
                <div id="album-detail" style="display:none;"></div>
            </section>
            <section class="content-section" id="search-section">
                <div class="section-title">Buscar m√∫sica</div>
                <div style="margin-bottom: 2rem;">
                    <input type="text" placeholder="¬øQu√© quieres escuchar?" style="width: 100%; padding: 1rem; background: #242424; border: none; border-radius: 4px; color: #fff;" id="search-input" onkeyup="searchMusic()">
                </div>
                <div id="search-results"></div>
            </section>
            <section class="content-section" id="library-section">
                <div class="section-title">Tu biblioteca</div>
                <div id="library-content">
                    <p>Aqu√≠ aparecer√°n tus √°lbumes y playlists guardados.</p>
                </div>
            </section>
        </main>
    </div>

    <!-- Barra inferior m√≥vil -->
    <nav class="bottom-nav-mobile">
        <a href="#" onclick="showSection('home')" id="nav-home"><span>üè†</span><small>Inicio</small></a>
        <a href="#" onclick="showSection('search')" id="nav-search"><span>üîç</span><small>Buscar</small></a>
        <a href="#" onclick="showSection('library')" id="nav-library"><span>üìö</span><small>Biblioteca</small></a>
        <a href="#" onclick="showFavorites()" id="nav-favs"><span>‚ù§Ô∏è</span><small>Favoritos</small></a>
        <a href="#" onclick="showAuth('login')" id="nav-login"><span>üîí</span><small>Acceso</small></a>
    </nav>

    <!-- Reproductores, modal de login y scripts... -->
    <!-- ...REUTILIZA tu c√≥digo JavaScript y el HTML de reproductores/modal/login de las versiones anteriores, sin cambios... -->
    <!-- ...solo asegurate de agregar este fragmento para marcar activo el √≠tem de barra inferior... -->

<script type="module">
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';
/* ...(el resto de tu script previo sin cambios)... */

// MODIFICADO: remarcar activo en la barra m√≥vil en showSection:
window.showSection = function(section) {
    document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
    document.getElementById(section + '-section').classList.add('active');
    document.querySelectorAll('nav a, .sidebar-menu a').forEach(a => a.classList.remove('active'));
    document.querySelector(`[onclick="showSection('${section}')"]`).classList.add('active');
    // -- barra inferior m√≥vil:
    document.querySelectorAll('.bottom-nav-mobile a').forEach(a => a.classList.remove('active'));
    if(section=='home') document.getElementById('nav-home').classList.add('active');
    if(section=='search') document.getElementById('nav-search').classList.add('active');
    if(section=='library') document.getElementById('nav-library').classList.add('active');
    if (window.innerWidth <= 768) document.getElementById('nav-menu').classList.remove('active');
}

window.showFavorites = function() {
    // ...tu l√≥gica de favoritos (la funci√≥n ya definida)
    document.querySelectorAll('.bottom-nav-mobile a').forEach(a => a.classList.remove('active'));
    document.getElementById('nav-favs').classList.add('active');
}

/* Y todo el resto del c√≥digo... */
</script>

</body>
</html>
