<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>KLMZ MUSIC</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { box-sizing: border-box; }
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #181818; color: #fff; padding-bottom: 60px;}
        header { background: #121212; padding: 1rem 1.5rem; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 100; }
        .logo { font-weight: bold; font-size: 1.4rem; letter-spacing: 1px; }
        .user-actions { display: flex; align-items: center; gap: 0.5rem;}
        .lock-icon { cursor: pointer; font-size: 1.4rem; color: #fff; user-select: none; transition: opacity 0.3s; }
        .lock-icon:hover { opacity: 0.7;}
        .app-container { display: flex; min-height: calc(100vh - 60px);}
        aside { width:220px; background:#121212; padding:1rem; overflow-y:auto; display:none;}
        main { flex: 1; padding:1rem; max-width:900px; margin:0 auto;}
        .section-title { font-size:1.8rem; font-weight:bold; margin-bottom:1.5rem;}
        .album-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); gap:1.5rem;}
        .album-card { background:none; border-radius:0; padding:0; transition:all 0.3s; cursor:pointer; display:flex; flex-direction:column; align-items:center; text-align:center;}
        .album-card:hover { background:none; transform:scale(1.05);}
        .album-img { border-radius:50% !important; width:80px; height:80px; object-fit:cover; margin-bottom:0.8rem; background:#333;}
        .album-title { font-size:1rem; font-weight:bold; margin-bottom:0.5rem;}
        .album-artist { font-size:0.9rem; color:#b3b3b3;}
        .song-list { width:100%; margin-top:1rem;}
        .song-list ul { list-style:none; padding:0; margin:0;}
        .song-list li { padding: 0.7rem; cursor:pointer; color: #1DB954; border-bottom:1px solid #333; transition:color 0.3s; display:flex; justify-content:space-between; align-items:center;}
        .song-list li:hover { color: #fff; background:rgba(255,255,255,0.05);}
        .play-icon { font-size:0.8rem;}
        .player { position:fixed; bottom:60px; left:0; right:0; background:#212121cc; border-top:1px solid #282828; z-index:300; display:flex; align-items:center; padding:0.8rem 1.2rem; min-height:60px; cursor:pointer; transition:all 0.2s; box-shadow: 0 -2px 10px #0002;}
        .player-img-mini { width:44px; height:44px; border-radius:8px; object-fit:cover; margin-right:1rem;}
        .player-info-mini { flex:1; overflow:hidden; }
        .player-title-mini { font-weight:bold; font-size:1rem; line-height:1.2;}
        .player-artist-mini { color:#b3b3b3; font-size:0.87rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
        .player-controls-inline { display:flex; align-items:center; gap:1rem;}
        .play-btn-inline { background:#1DB954; color:#fff; border:none; border-radius:50%; width:40px; height:40px; font-size:1.3rem; cursor:pointer;}
        .full-player-backdrop { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.97); z-index:9999; align-items:center; justify-content:center; flex-direction:column; animation:fadeIn 0.2s;}
        .full-player-backdrop.active { display: flex;}
        .full-player-cover { width:120px; height:120px; border-radius:50%; margin:0 auto 1.2rem; display:block; object-fit:cover;}
        .full-player-title { font-size:1.5rem; font-weight:bold; margin:1rem 0 0.4rem 0; text-align:center;}
        .full-player-artist { color:#b3b3b3; font-size:1.1rem; margin-bottom:1.5rem; text-align:center;}
        .full-player-controls { display:flex; flex-direction:column; align-items:center; gap:1.2rem; width:100%;}
        .full-control-buttons { display:flex; gap:2.5rem;}
        .full-control-btn { background:none; border:none; color:#fff; font-size:2.2rem; padding:0.8rem; border-radius:50%; cursor:pointer;}
        .full-play-btn { background:#1DB954; color:#fff; border-radius:50%; box-shadow:0 2px 8px #1DB95455; font-size:2.6rem;}
        .full-progress-container { width:80%; max-width:330px; display:flex; align-items:center; gap:0.6rem;}
        .full-progress-bar { flex:1; height:6px; background:#4f4f4f; border-radius:3px; cursor:pointer; position:relative;}
        .full-progress-fill { height:100%; background:#1DB954; border-radius:3px; width:0%; transition:width 0.1s; position:absolute; top:0; left:0;}
        .full-progress-time { font-size:0.9rem; color:#b3b3b3;}
        .full-player-volume { margin-top:1.2rem;}
        .full-volume-slider { width:150px;}
        .full-player-close { position:absolute; top:24px; right:30px; background:none; border:none; font-size:2.5rem; color:#fff; cursor:pointer;}
        .modal { position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.8); display:none; align-items:center; justify-content:center; z-index:300;}
        .modal-content { background:#282828; padding:2rem; border-radius:8px; width:90%; max-width:600px; max-height:90vh; overflow-y:auto;}
        .form-group { margin-bottom:1rem;}
        .form-group label { display:block; margin-bottom:0.5rem;}
        .form-group input, .form-group select { width:100%; padding:0.7rem; background:#404040; border:1px solid #555; border-radius:4px; color:#fff;}
        .btn-primary { background:#1DB954; color:#fff; border:none; padding:0.7rem 1.5rem; border-radius:999px; cursor:pointer; width:100%; margin-top:1rem;}
        .btn-danger { background:#e22134; color:#fff; border:none; padding:0.5rem 1rem; border-radius:4px; cursor:pointer;}
        .close-modal { position:absolute; top:1rem; right:1rem; background:none; border:none; color:#fff; font-size:1.5rem; cursor:pointer;}
        .admin-item { background:none; border-radius:8px; display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem; padding:0.5rem 0;}
        .admin-actions { display:flex; gap:0.5rem; }
        /* Barra navegaci√≥n inferior m√°s peque√±a y iconos m√°s sencillos */
        .bottom-nav {
            position:fixed;
            bottom:0; left:0; right:0; background:#191919; border-top: 1px solid #333;
            display:flex; justify-content:space-around; align-items:center;
            height:60px; z-index:5000; box-shadow:0 -2px 10px rgba(0,0,0,0.22);
        }
        .bottom-nav-item {
            color: #b3b3b3; text-align: center; flex: 1; padding:4px 0 0 0; font-size:1.12rem; border-radius:7px; cursor:pointer; transition:background .2s,color .2s;
            display: flex; flex-direction: column; align-items: center; gap:2px;
        }
        .bottom-nav-item.active { color:#1DB954; background:rgba(29,185,84,0.12);}
        .bottom-nav-item:active,.bottom-nav-item:hover { background:rgba(255,255,255,0.05);}
        .bottom-nav-item .icon { font-size:1.15rem; line-height:1;}
        .bottom-nav-item small { font-size:0.67rem;}
        @media (min-width:900px) { aside {display:block;} main {margin-left:220px; max-width:none;} }
        @keyframes fadeIn { from{opacity:0;} to{opacity:1;}}
    </style>
</head>
<body>
<header>
    <span class="logo">KLMZ MUSIC</span>
    <div class="user-actions">
        <div class="lock-icon" title="Iniciar sesi√≥n / Registrarse" onclick="showAuth('login')">üîí</div>
    </div>
</header>
<div class="app-container">
    <aside id="sidebar">
        <div class="sidebar-section">
            <h3>Playlists</h3>
            <button class="create-playlist" onclick="createPlaylist()">‚ûï Crear playlist</button>
            <div class="sidebar-menu" id="playlists-menu"></div>
        </div>
    </aside>
    <main>
        <section class="content-section active" id="home-section">
            <div class="section-title">Bienvenido a KLMZ MUSIC</div>
            <div class="album-grid" id="albums"></div>
            <div id="album-detail" style="display:none;"></div>
        </section>
        <section class="content-section" id="search-section">
            <div class="section-title">Buscar m√∫sica</div>
            <div style="margin-bottom: 2rem;">
                <input type="text" placeholder="¬øQu√© quieres escuchar?" style="width: 100%; padding: 1rem; background: #242424; border: none; border-radius: 4px; color: #fff;" id="search-input" onkeyup="searchMusic()">
            </div>
            <div id="search-results"></div>
        </section>
        <section class="content-section" id="library-section">
            <div class="section-title">Tu biblioteca</div>
            <div id="library-content"></div>
        </section>
        <section class="content-section" id="admin-section">
            <div class="section-title">Panel de Administraci√≥n</div>
            <div style="display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap;">
                <button class="btn-primary" onclick="showUploadAlbum()" style="width: auto;">Subir √Ålbum</button>
                <button class="btn-primary" onclick="showUploadSong()" style="width: auto;">Subir Canci√≥n</button>
                <button class="btn-primary" onclick="showManageAlbums()" style="width: auto;">Gestionar √Ålbumes</button>
            </div>
            <div id="admin-content"></div>
        </section>
    </main>
</div>
<nav class="bottom-nav">
    <div class="bottom-nav-item active" onclick="showSection('home')" id="nav-home"><span class="icon">‚åÇ</span><small>Inicio</small></div>
    <div class="bottom-nav-item" onclick="showSection('search')" id="nav-search"><span class="icon">‚åï</span><small>Buscar</small></div>
    <div class="bottom-nav-item" onclick="showSection('library')" id="nav-library"><span class="icon">‚â°</span><small>Biblioteca</small></div>
    <div class="bottom-nav-item" onclick="showFavorites()" id="nav-favs"><span class="icon">‚ô°</span><small>Favoritos</small></div>
    <div class="bottom-nav-item" onclick="createPlaylist()" id="nav-playlist"><span class="icon">+</span><small>Playlist</small></div>
    <div class="bottom-nav-item" onclick="showAuth('login')" id="nav-login"><span class="icon">‚óè</span><small>Acceso</small></div>
</nav>
<div class="player" id="mini-player" style="display:none;">
    <img class="player-img-mini" id="mini-player-img">
    <div class="player-info-mini">
        <div class="player-title-mini" id="mini-player-title"></div>
        <div class="player-artist-mini" id="mini-player-artist"></div>
    </div>
    <div class="player-controls-inline" onclick="event.stopPropagation()">
        <button class="play-btn-inline" id="mini-play-btn" onclick="togglePlay()"></button>
    </div>
</div>
<div class="full-player-backdrop" id="full-player">
    <button class="full-player-close" onclick="closeFullPlayer()">&times;</button>
    <img id="full-player-cover" class="full-player-cover" src="">
    <div class="full-player-title" id="full-player-title"></div>
    <div class="full-player-artist" id="full-player-artist"></div>
    <div class="full-player-controls">
        <div class="full-control-buttons">
            <button class="full-control-btn" onclick="previousSong()">‚èÆ</button>
            <button class="full-control-btn full-play-btn" id="full-play-btn" onclick="togglePlay()"></button>
            <button class="full-control-btn" onclick="nextSong()">‚è≠</button>
        </div>
        <div class="full-progress-container">
            <span class="full-progress-time" id="full-current-time">0:00</span>
            <div class="full-progress-bar" onclick="seekToFull(event)">
                <div class="full-progress-fill" id="full-progress-fill"></div>
            </div>
            <span class="full-progress-time" id="full-total-time">0:00</span>
        </div>
        <div class="full-player-volume">
            <input type="range" class="full-volume-slider" min="0" max="100" value="50" oninput="setVolume(this.value)">
        </div>
    </div>
</div>
<!-- Modal para login y para admin (igual que antes, pero usa inputs de tipo "file" en los formularios y los JS que te puse en la respuesta anterior) -->
<!-- ... recuerda modificar la l√≥gica para panel admin y subida de archivos, como ya detallado en las instrucciones previas ... -->
<!-- ... el resto de los scripts no requiere cambios de fondo m√°s all√° del manejo de la portada y archivo musical como archivos locales, y asegurarte de pasar el album.cover_url adecuado como imagen al mini-player y full-player ... -->
<!-- ... si necesitas el script de panel de admin/subida aqu√≠ insertado, comenta para peg√°rtelo listo ... -->
</body>
</html>
